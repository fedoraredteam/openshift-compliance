



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Security CONOPS &mdash; OpenShift Compliance Guide 1.0 beta documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security Controls" href="controls.html" />
    <link rel="prev" title="The OpenShift Compliance Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="toc.html" class="icon icon-home" alt="Documentation Home"> OpenShift Compliance Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">  Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">  Security CONOPS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#security-standards">Security Standards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#architecture">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#infrastructure-view">Infrastructure View</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#iaas-definition-nist-800-145">IaaS Definition - NIST 800-145</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stakeholders">Stakeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#diagram">Diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="#components">Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-architecture">Network Architecture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#platform-view">Platform View</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#paas-definition-nist-800-145">PaaS Definition - NIST 800-145</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Stakeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#roles">Roles</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Network Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-security-platform-users">Platform Security - Platform Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-security-container-security">Platform Security - Container Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#storage-architecture">Storage Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platform-security-storage-security">Platform Security - Storage Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Diagram</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#application-view">Application View</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#definition">Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#actors">Actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-security-sensitive-configuration-data">Application Security - Sensitive Configuration Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Components</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#container-view">Container View</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Actors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#container-filesystem">Container Filesystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kernel-components">Kernel Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selinux">SELinux</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="controls.html">  Security Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="crm.html">  Customer Responsibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansible.html">  Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">  Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="toc.html">OpenShift Compliance Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="toc.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Security CONOPS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sec_conops.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="security-conops">
<span id="sec-conops"></span><h1>Security CONOPS<a class="headerlink" href="#security-conops" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Security Concept of Operations (CONOPS) details, at various levels of abstraction, a
deployment of Red Hat’s OpenShift Container Platform (OCP) deployed on Amazon Web Services (AWS).  The NIST <em>Definition of Cloud Computing</em> (<a class="reference external" href="http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-145.pdf">NIST 800-145</a>) succinctly describes different cloud service models and the attributes of a cloud platform.  The architecture described herein follows the definitions found in the NIST 800-145.  For example, Red Hat’s OCP is a Platform as a Service (PaaS) under NIST 800-145.  Similarly, AWS is an Infrastructure as a Service (IaaS) per the NIST definition.</p>
<div class="section" id="security-standards">
<h3>Security Standards<a class="headerlink" href="#security-standards" title="Permalink to this headline">¶</a></h3>
<p>The Fedral Information Security Modernization Act (<a class="reference external" href="http://csrc.nist.gov/drivers/documents/FISMA-final.pdf">FISMA</a>), originally enacted in 2002, directs United States Federal Agencies to develop and implement programs to implement information and information systems security.  This reference architecture aims to describe an OCP deployment on AWS as FISMA high: high confidentiality, high integrity, high availability.</p>
<p>In order to demonstrate FISMA high, this architecture is traced to <a class="reference external" href="https://web.nvd.nist.gov/view/800-53/home">NIST 800-53</a> <em>Security and Privacy Controls for Federal Information Systems and Organizations</em>.  The NIST 800-53 provides a catalog of controls accross multiple categories.  Many controls relate to organizational processes.  These controls will be mapped as appropriate.  The controls that are technical in nature are addressed by this architecture.</p>
</div>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>This architecture is divided into architectural views loosely mapped to the NIST 800-145 <em>Definition of Cloud Computing</em>.  The nature of cloud computing affords the adoption of a Landlord/Tenant model.  This model allows the Landlord to take responsibility for a set of controls under NIST 800-53, relieving the tenant of the need to address those controls.  The following table lists lists the relationship of Landlord to Tenant in this reference architecture.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Landlord</p></th>
<th class="head"><p>Tenant</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AWS</p></td>
<td><p>OCP</p></td>
</tr>
<tr class="row-odd"><td><p>OCP</p></td>
<td><p>Applications</p></td>
</tr>
</tbody>
</table>
<p>As stated prviously, the IaaS in this architecture is AWS.  Red Hat’s OCP is the PaaS.  Tenant applications are deployed in containers, managed by OCP.</p>
<div class="section" id="infrastructure-view">
<h3>Infrastructure View<a class="headerlink" href="#infrastructure-view" title="Permalink to this headline">¶</a></h3>
<p>The infrastructure view describes the OCP components at the infrastructure level.  These components are necessary to serve OCP in AWS and achieving FISMA high.</p>
<div class="section" id="iaas-definition-nist-800-145">
<h4>IaaS Definition - NIST 800-145<a class="headerlink" href="#iaas-definition-nist-800-145" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The capability provided to the consumer is to provision processing, storage, networks, and other fundamental computing resources where the consumer is able to deploy and run arbitrary software, which can include operating systems and applications. The consumer does not manage or control the underlying cloud infrastructure but has control over operating systems, storage, and deployed applications; and possibly limited control of select networking components (e.g., host firewalls).</p>
</div></blockquote>
</div>
<div class="section" id="description">
<h4>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>AWS provides this capability.  Amazon provides the underlying hardware infastructure that supports the self-service provisioning into the cloud of what has traditionaly been based in hardware.  This includes, but is not limited to compute, storage, and networking services.</p>
</div>
<div class="section" id="stakeholders">
<h4>Stakeholders<a class="headerlink" href="#stakeholders" title="Permalink to this headline">¶</a></h4>
<p><strong>Cluster Administrators</strong> require AWS console access and the ability to deploy and/or configure the following AWS components.</p>
<blockquote>
<div><ul class="simple">
<li><p>VPC</p></li>
<li><p>Elastic IP</p></li>
<li><p>Elastic Cloud Compute (EC2)</p></li>
<li><p>VPC Peering</p></li>
<li><p>Route Tables</p></li>
</ul>
</div></blockquote>
<p><strong>Application Developers</strong> do not have a role at the infrastructure level.</p>
<p><strong>Application Consumers</strong> do not have a role at the infrastructure level.</p>
</div>
<div class="section" id="diagram">
<h4>Diagram<a class="headerlink" href="#diagram" title="Permalink to this headline">¶</a></h4>
<p>The following diagram illustrates the high level deployment of OCP in AWS and the necessary AWS components to support OCP.
<img alt="Infrastructure View" src="_images/InfrastructureView.png" /></p>
</div>
<div class="section" id="components">
<h4>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h4>
<p>The following table describes each AWS component and relates it to the implementation in the OCP reference architecture.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 59%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>AWS Component</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>OCP Component</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>VPC</p></td>
<td rowspan="2"><p>A logically isolated section of AWS in which resources
are connected via a virtual networking environment.</p></td>
<td><p>Red Hat VPC</p></td>
</tr>
<tr class="row-odd"><td><p>1..n Dedicated VPC’s</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>Subnet</p></td>
<td rowspan="4"><p>Virtually isolated network used on which traffic
is isolatedbecause isolation makes for great neighbors.</p></td>
<td><p>Management Subnet</p></td>
</tr>
<tr class="row-odd"><td><p>Staging Subnet</p></td>
</tr>
<tr class="row-even"><td><p>Operations Subnet</p></td>
</tr>
<tr class="row-odd"><td><p>Dedicated Subnet</p></td>
</tr>
<tr class="row-even"><td><p>EC2 Compute
Instance</p></td>
<td><p>A scalable compute capacity in AWS.  Compute instances
are instantiated from cloud images with pre-installed
operating systems, for example Red Hat Enterprise Linux.</p></td>
<td><p>All OCP Platform
components.</p></td>
</tr>
<tr class="row-odd"><td><p>Route Table</p></td>
<td><p>A route table defines rules as to how network traffic
in a VPC is routed internally.</p></td>
<td><p>Red Hat VPC</p></td>
</tr>
<tr class="row-even"><td rowspan="5"><p>Elastic IP</p></td>
<td rowspan="5"><p>An Elastic IP is associated with an EC2 Instance and is
publically reacheable.</p></td>
<td><p>Staging HA Proxy</p></td>
</tr>
<tr class="row-odd"><td><p>Staging Authentication</p></td>
</tr>
<tr class="row-even"><td><p>Staging App. Traffic</p></td>
</tr>
<tr class="row-odd"><td><p>Bastion</p></td>
</tr>
<tr class="row-even"><td><p>Ansible Tower</p></td>
</tr>
<tr class="row-odd"><td><p>VPC Peering</p></td>
<td><p>A VPC peering connection is a networking connection
between two VPCs that enables traffic to be routed
between them using private IP addresses.</p></td>
<td><p>Between the Red Hat
VPC and any Dedicated
VPC</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>Elastic Load
Balancer</p></td>
<td rowspan="4"><p>An ELB automatically distributes traffic among EC2
instances.</p></td>
<td><p>Operations API</p></td>
</tr>
<tr class="row-odd"><td><p>Operations Application</p></td>
</tr>
<tr class="row-even"><td><p>Dedicated API</p></td>
</tr>
<tr class="row-odd"><td><p>Dedicated Application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="network-architecture">
<h4>Network Architecture<a class="headerlink" href="#network-architecture" title="Permalink to this headline">¶</a></h4>
<p>The network views below assume that OCP is deployed on to an <a class="reference external" href="https://en.wikipedia.org/wiki/Air_gap_(networking)">air-gapped</a> network that is unable to route to the Internet.</p>
<p>The <strong>Staging Subnet</strong> provides an isolated area for platform administrators to apply regular patches and test configuration changes before applying these to the operations cluster.  One cluster of OCP is deployed in this VPC.</p>
<p>The <strong>Operations Subnet</strong> contains a single deployment of OpenShift where tenants will deploy applications.  OCP Nodes will be labled and functionally grouped to support development, test, and production deployments of an application.  This is described in detail in the <em>Platform View</em>.</p>
<p>The <strong>Management Subnet</strong> contains the Trusted Container Repository as well as the Package Repository.  A route table allows the <strong>Managent Subnet</strong> to communicate to the <strong>Staging Subnet</strong>, <strong>Operations Subnet</strong>.  The <strong>Staging Subnet</strong> and <strong>Operations Subnet</strong> are not permitted to communicate with each other. A VPC peering connection allows the <strong>Management Subnet</strong> in the <strong>Red Hat VPC</strong> to communicate with any <strong>Dedicated VPC’s</strong>.</p>
<p><strong>Dedicated VPC’s</strong> are VPC’s that are deployed to support specific isolation needs of a particular tenant.  These may be created and destroyed per organizational needs.</p>
<p>The <strong>bastion host</strong> allows OCP Administrators and only OCP Administrators the ability to access the underlying hosts in each VPC.</p>
<p><strong>Application Developers</strong> interact with OCP via a command line interface (CLI) and web user interface (WebUI).  An application router, internal to OCP, handles application traffic.  Therefore certain ports in a security group must be exposed on the <strong>Red Hat VPC</strong> to allow ths traffic.  The same is true of any <strong>Dedicated VPC’s</strong>.  The following table details this information.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 28%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>VPC Port</p></th>
<th class="head"><p>VPC/Subnet</p></th>
<th class="head"><p>Exposed Component</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="7"><p>443/TCP</p></td>
<td rowspan="2"><p>Red Hat/Operations</p></td>
<td><p>ELB - API Traffic</p></td>
</tr>
<tr class="row-odd"><td><p>ELB - Application Traffic</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Red Hat/Staging</p></td>
<td><p>Elastic IP - API HA Proxy</p></td>
</tr>
<tr class="row-odd"><td><p>Elastic IP - Application Traffic</p></td>
</tr>
<tr class="row-even"><td><p>Red Hat/Management</p></td>
<td><p>Elastic IP - Ansible Tower</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Dedicated/Dedicated</p></td>
<td><p>ELB - API Traffic</p></td>
</tr>
<tr class="row-even"><td><p>ELB - Application Traffic</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>4444/TCP</p></td>
<td><p>Red Hat/Operations</p></td>
<td><p>ELB - API Traffic - Authentication</p></td>
</tr>
<tr class="row-even"><td><p>Red Hat/Staging</p></td>
<td><p>Elastic IP - API Traffic - Authentication</p></td>
</tr>
<tr class="row-odd"><td><p>Dedicated/Dedicated</p></td>
<td><p>ELB - API Traffic - Authentication</p></td>
</tr>
<tr class="row-even"><td><p>22/TCP</p></td>
<td><p>Red Hat/Management</p></td>
<td><p>Elastic IP - SSH Bastion</p></td>
</tr>
</tbody>
</table>
<p>Communications internal to the nodes occur in the network address space defined by VPC subnets.</p>
</div>
</div>
<div class="section" id="platform-view">
<h3>Platform View<a class="headerlink" href="#platform-view" title="Permalink to this headline">¶</a></h3>
<p>The platform view describes the OCP architecture at the platform level.  This view abstracts out the AWS components and focuses primarily on the functional components of OCP.</p>
<div class="section" id="paas-definition-nist-800-145">
<h4>PaaS Definition - NIST 800-145<a class="headerlink" href="#paas-definition-nist-800-145" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>The capability provided to the consumer is to deploy onto the cloud infrastructure consumer-created or acquired applications created using programming languages, libraries, services, and tools supported by the provider.  The consumer does not manage or control the underlying cloud infrastructure including network, servers, operating systems, or storage, but has control over the deployed applications and possibly configuration settings for the application-hosting environment.</p>
</div></blockquote>
</div>
<div class="section" id="id1">
<h4>Description<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The OpenShift Container Platform provides application developer’s the ability to rappidly deploy applications in a variety of application frameworks.</p>
</div>
<div class="section" id="id2">
<h4>Stakeholders<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>Cluster Administrators</strong> are responsible for the operations and proper function of the platform.  They have the ability to affect OCP security policies surrounding developer interaction and container function.</p>
<p><strong>Application Developers</strong> have access to the OCP WebUI and CLI to deploy applications.</p>
<p><strong>Application Users</strong> do not have a role at the platform level.</p>
</div>
<div class="section" id="roles">
<h4>Roles<a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Cluster Administrator</p></td>
<td><p>Full administrative control over the OpenShift cluster</p></td>
</tr>
<tr class="row-odd"><td><p>Cluster Auditor</p></td>
<td><p>Read-only access to all objects on the cluster</p></td>
</tr>
<tr class="row-even"><td><p>Project Administrator</p></td>
<td><p>Full administrative access to a project</p></td>
</tr>
<tr class="row-odd"><td><p>Project Auditor</p></td>
<td><p>Read-only access to a project</p></td>
</tr>
<tr class="row-even"><td><p>Application Developer</p></td>
<td><p>Full access to build, deploy and terminate applications.
Cannot modify access to the project.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h4>Diagram<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The following diagram details the minimum highly-available configuration of OCP to meet FISMA high at the platform level.</p>
<p><img alt="Platform View" src="_images/PlatformView.png" /></p>
</div>
<div class="section" id="id4">
<h4>Components<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 94%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Master</p></td>
<td><p>The OCP Master provides the API and WebUI entry points for Application Developers and OCP administrators. The OCP Master is also responsible for scheduling containers on each node.</p></td>
</tr>
<tr class="row-odd"><td><p>ETCD</p></td>
<td><p>The ETCD servers are key-value stores used for maintaining information about the state of the OCP cluster.</p></td>
</tr>
<tr class="row-even"><td><p>Application Node</p></td>
<td><p>The Application Nodes handle executing application containers.</p></td>
</tr>
<tr class="row-odd"><td><p>Infrastructure Node</p></td>
<td><p>In an OCP cluster, a containerized HA proxy routes application traffic.  A containerized integrated container registry in OCP is a mechanism in the automated build and deployment flow.  Both the application router and integrated container registry and only these components run on the Infrastructure Node.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h4>Network Architecture<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>The network architecture in the platform view is broken into two parts.  The first is the internal networking from between the EC2 instances supporting the platorm.  The second is the software defined networking layer enabling multi-tenant deployment of container based applications.</p>
<p>The following diagram illustrates the internetworking of the platform components of OCP.</p>
<p><img alt="Platform Network" src="_images/PlatformNetwork.png" /></p>
<p>The following table describes the port information of the internal platform components.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>From</p></th>
<th class="head"><p>To</p></th>
<th class="head"><p>Port</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Application Traffic ELB</p></td>
<td><p>OCP Infrastructure Node</p></td>
<td><p>443/TCP</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>API Traffic ELB</p></td>
<td><p>HA and Authentication Proxy</p></td>
<td><p>8443/TCP</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>HA and Authentication Proxy</p></td>
<td><p>OCP Master</p></td>
<td><p>8443/TCP</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OCP Master</p></td>
<td><p>OCP Master and Loop</p></td>
<td><p>8053/TCP</p></td>
<td><p>Required for DNS resolution of clustered services.</p></td>
</tr>
<tr class="row-even"><td><p>OCP Master</p></td>
<td><p>OCP Master and Loop</p></td>
<td><p>8053/UDP</p></td>
<td><p>Required for DNS resolution of clustered services.</p></td>
</tr>
<tr class="row-odd"><td><p>OCP Master</p></td>
<td><p>OCP Master</p></td>
<td><p>2379/TCP</p></td>
<td><p>Used for standalone etcd (clustered) to accept changes in state.</p></td>
</tr>
<tr class="row-even"><td><p>OCP Master</p></td>
<td><p>OCP Master</p></td>
<td><p>2380/TCP</p></td>
<td><p>etcd requires this port be open between masters for leader election and peering connections when using standalone etcd (clustered).</p></td>
</tr>
<tr class="row-odd"><td><p>OCP Master</p></td>
<td><p>OCP Node</p></td>
<td><p>4789/UDP</p></td>
<td><p>Required for SDN communication between pods on separate hosts.</p></td>
</tr>
<tr class="row-even"><td><p>OCP Master</p></td>
<td><p>OCP Node</p></td>
<td><p>10250/TCP</p></td>
<td><p>The master proxies to node hosts via the Kubelet for oc commands.</p></td>
</tr>
<tr class="row-odd"><td><p>OCP Node</p></td>
<td><p>OCP Master</p></td>
<td><p>4789/UDP</p></td>
<td><p>Required for SDN communication between pods on separate hosts.</p></td>
</tr>
<tr class="row-even"><td><p>OCP Node</p></td>
<td><p>OCP Master</p></td>
<td><p>8053/TCP</p></td>
<td><p>Required for DNS resolution of clustered services.</p></td>
</tr>
<tr class="row-odd"><td><p>OCP Node</p></td>
<td><p>OCP Master</p></td>
<td><p>8053/UDP</p></td>
<td><p>Required for DNS resolution of clustered services.</p></td>
</tr>
<tr class="row-even"><td><p>OCP Node</p></td>
<td><p>OCP Master</p></td>
<td><p>8443/TCP</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>All</p></td>
<td><p>Package Repository</p></td>
<td><p>443/TCP</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OCP Node</p></td>
<td><p>Trusted Container Repository</p></td>
<td><p>443/TCP</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Bastion</p></td>
<td><p>All</p></td>
<td><p>22/TCP</p></td>
<td><p>SSH</p></td>
</tr>
<tr class="row-even"><td><p>Ansible Tower</p></td>
<td><p>All</p></td>
<td><p>22/TCP</p></td>
<td><p>SSH used during Ansible Plays</p></td>
</tr>
<tr class="row-odd"><td><p>OCP Node</p></td>
<td><p>Gluster Node</p></td>
<td><p>49152-49251/TCP</p></td>
<td><p>For client communication with Red Hat Gluster Storage 2.1 and for brick processes depending on the availability of the ports. The total number of ports required to be open depends on the total number of bricks exported on the machine.</p></td>
</tr>
<tr class="row-even"><td><p>Gluster Node</p></td>
<td><p>Gluster Node</p></td>
<td><p>24007/TCP</p></td>
<td><p>For glusterd (for management).</p></td>
</tr>
</tbody>
</table>
<p>In order to achieve network traffic isolation between containers owned by different tenants running on the same node, the traffic must be encapsulated.  This capability is provided by OpenVSwitch which encapsulates the OSI L2 traffic from the containers in the L3 traffic between the nodes.  The packets are then tagged by an 24 bit value known as a VXLan Network Identifier (VNID).  A VNID corresponds to a project space in OCP and is transparent to both the <strong>Application Developer</strong> and <strong>Application User</strong>.  In order to utilize this option the <em>redhat/openshift-ovs-multitenant</em> must be selected during the installation.</p>
<p>The L3 traffic between nodes is sent as UDP packets to port 4789.</p>
<p>More information on the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/additional_concepts/sdn.html">software defined network</a> in OCP can be found in the online documentation.</p>
</div>
<div class="section" id="platform-security-platform-users">
<h4>Platform Security - Platform Users<a class="headerlink" href="#platform-security-platform-users" title="Permalink to this headline">¶</a></h4>
<p>Regardless of the user role, all users are subject to <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/additional_concepts/authorization.html#architecture-additional-concepts-authorization">authorization policies</a> managed in the OCP cluster.  Authorization polcies dictate what a user can and cannot do.  Policies are enforce at the project (local) level, and separately at the cluster level.</p>
<p>The following table describes the elements comprising an authorization role.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Rules</p></th>
<th class="head"><p>Sets of permitted verbs on a set of objects. For example, whether something can create pods.</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Roles</p></td>
<td><p>Collections of rules. Users and groups can be associated with, or bound to, multiple roles at the same time.</p></td>
</tr>
<tr class="row-odd"><td><p>Bindings</p></td>
<td><p>Associations between users and/or groups with a role.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="platform-security-container-security">
<h4>Platform Security - Container Security<a class="headerlink" href="#platform-security-container-security" title="Permalink to this headline">¶</a></h4>
<p>Container security occurs at multiple levels.  At the platform level, OCP applies <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/additional_concepts/authorization.html#security-context-constraints">security context constraints</a> (SCC’s) to manage what a container can and cannot do.  OCP provides a number of SCC’s out of the box.  The default SCC is highly restrictive to unprivileged containers.</p>
<p>Unprivileged containers are containers deployed in a tenant application.  Specific action is required on the part of the <strong>Cluster Administrator</strong> to allow an <strong>Application Developer</strong> the ability to deploy a container with escallated privileges.</p>
<p>A notable attribute of SCC’s is the user ID enforcement.  When a container executes, the entry process runs in the container as a specified user ID.  The <em>restricted</em> SCC forces the container to be run as a very high UID.  This prevents a container from being deployed where the internal user ID is set to 0 (root).</p>
</div>
<div class="section" id="storage-architecture">
<h4>Storage Architecture<a class="headerlink" href="#storage-architecture" title="Permalink to this headline">¶</a></h4>
<p>Managing storage is a distinct problem from managing compute resources. OpenShift Container Platform leverages the Kubernetes persistent volume (PV) framework to allow administrators to provision persistent storage for a cluster. Using persistent volume claims (PVCs), developers can request PV resources without having specific knowledge of the underlying storage infrastructure.</p>
<p>In this reference architecture, storage services are provided through a managed storage tier, implemented by Red Hat Gluster Storage (Gluster).  Gluster provides a fault-tolerant and highly available network storage resource, efficiently rationed to tenant applications as PVs.  Since the storage interface to developers is managed by the Kubernetes PVC resource, the details of the underlying storage implementation are abstracted.</p>
<p>PVCs are specific to a project and are created and used by developers as a means to use a PV. PV resources on their own are not scoped to any single project; they can be shared across the entire OpenShift Container Platform cluster and claimed from any project. After a PV has been bound to a PVC, however, that PV cannot then be bound to additional PVCs. This has the effect of scoping a bound PV to a single namespace (that of the binding project).</p>
<p>The Gluster storage services are provided through a dedicated cluster of AWS instances within the scope of the platform VPC.  Administrators allocate storage resources, creating a pool of available PVs in standard sizes, and monitor the capacity of the underlying storage resources.  As PVs are released, administrators ensure the deletion and reclamation of storage resources, returning capacity to the pool of available PVs.</p>
</div>
<div class="section" id="platform-security-storage-security">
<h4>Platform Security - Storage Security<a class="headerlink" href="#platform-security-storage-security" title="Permalink to this headline">¶</a></h4>
<p>Gluster complies with data protection requirements through secure configuration of the storage resources and transport protocols.  At rest, data is protected by LUKS encryption of the of the AWS EBS devices.  This ensures that access to EBS volumes or snapshots by unauthorized mechanisms are unable to extract any usable information from the storage tier.  Configuration of LUKS encryption in Red Hat Enterprise Linux 7 is configured according to the <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Security_Guide/sec-Encryption.html">Encryption chapter of the RHEL 7 Security Guide</a>.</p>
<p>During transit, information is protected through configuration of SSL connections, and enforcement of mutually authenticated TLS connections.  For more information, refer to <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Storage/3.1/html/Administration_Guide/chap-Network_Encryption.html">Configuring Network Encryption in Red Hat Gluster Storage</a>.</p>
</div>
<div class="section" id="id6">
<h4>Diagram<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>The following diagram depicts the mapping of storage devices to application resources within OCP.  The LUKS encryption is enabled at the EBS device, ensuring that all data is encrypted prior to writing to disk.  This architecture is designed to be compatible with the OCP and Kubernetes roadmaps, specifically with reference to upcoming dynamic provisioning features.</p>
<p><img alt="Storage View" src="_images/StorageView.png" /></p>
<p>In this view, the synchronous replication is shown between availability zones of the IaaS tier.  This ensures high availability and integrity of data stored within the platform.</p>
<p><img alt="Storage Replication View" src="_images/StorageReplicationView.png" /></p>
</div>
</div>
<div class="section" id="application-view">
<h3>Application View<a class="headerlink" href="#application-view" title="Permalink to this headline">¶</a></h3>
<div class="section" id="definition">
<h4>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">¶</a></h4>
<p>The application view describes the OCP architecture at the application level.  This view focuses on the services and interfaces available to project tenants within the platform.</p>
</div>
<div class="section" id="id7">
<h4>Description<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="actors">
<h4>Actors<a class="headerlink" href="#actors" title="Permalink to this headline">¶</a></h4>
<p><strong>Application Developers</strong></p>
<p><strong>OCP Administrators</strong> are responsible for the creation of tenant projects and assignment of proper roles of project administrators.</p>
<p><strong>Project Administrators</strong> are responsible for assignment of proper roles within the scope of a single tenant project.  They have the ability to affect security policies surrounding developer interaction and container function, including the ability to grant privileges to administer, edit, or view project level resources.</p>
<p><strong>Application Developers</strong> have access to the OCP WebUI and CLI to create, build, deploy, and delete applications within the scope of a project, subject to the roles and privileges assigned by the Project Administrators.</p>
<p><strong>Application Users</strong> do not have a role at the application level.</p>
</div>
<div class="section" id="application-security-sensitive-configuration-data">
<h4>Application Security - Sensitive Configuration Data<a class="headerlink" href="#application-security-sensitive-configuration-data" title="Permalink to this headline">¶</a></h4>
<p>There is often a need to provide sensitive data for the proper configuration of the application or service component.  For instance, it may be necessary to provide encryption keys, passwords, configuration files, private source repository credentials, and other data considered sensitive.  This data often varies between environments, such as database passwords or SSL server certificates.  Secrets provide a mechanism to decouple sensitive content from the pods that use it, removing the necessity of storing this data on the filesystem or within the container image itself.  This mechanism promotes best practices for abstracting environment-specific configuration data away from the build process, as well as provides an encrypted storage mechanism.  For more information on this topic, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/dev_guide/secrets.html">Secrets documentation</a>.</p>
</div>
<div class="section" id="id8">
<h4>Diagram<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>The following diagram details the conceptual use of project resources to build and deploy applications within a project.</p>
<p><img alt="Application View" src="_images/ApplicationView.png" /></p>
</div>
<div class="section" id="id9">
<h4>Components<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 4%" />
<col style="width: 96%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Dev</p></td>
<td><p>Application Developers interact with the platform by creating project resource definitions, and by pushing application code revisions to the enterprise hosted git service.</p></td>
</tr>
<tr class="row-odd"><td><p>App Code</p></td>
<td><p>The source code artifacts implementing the business logic of an application service or component.</p></td>
</tr>
<tr class="row-even"><td><p>git</p></td>
<td><p>The source code configuration management system.  For this architecture, the git service is assumed to be provided externally, as a corporate or project team resource.</p></td>
</tr>
<tr class="row-odd"><td><p>Build Config</p></td>
<td><p>A build configuration describes a single build definition and a set of triggers for when a new build should be created.  For in depth description of builds and OCP build configurations, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/dev_guide/builds.html">Build documentation</a></p></td>
</tr>
<tr class="row-even"><td><p>Integrated Registry</p></td>
<td><p>The OCP integrated registry is a controlled container image registry for storing OCP container images and completed application builds.  For more information regarding the integrated registry, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/infrastructure_components/image_registry.html">Image Registry documentation</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Builder Image</p></td>
<td><p>A builder image is a pre-defined container image that stores the build process for compilation and assembly of application source code.  It houses the compiler binaries required for interpretation of source code, and the tools necessary for building application images.</p></td>
</tr>
<tr class="row-even"><td><p>builder</p></td>
<td><p>The builder is a container derived from the builder image.  It produces an application image using the defined build process using the compiler binaries.</p></td>
</tr>
<tr class="row-odd"><td><p>App Image</p></td>
<td><p>An Application Image is produced as a result of the application build process.  It is composed of a certified base image, application server components, required configurations, and finally, the compiled application source code.</p></td>
</tr>
<tr class="row-even"><td><p>Deployment Config</p></td>
<td><p>The deployment config defines the requirements and configuration of resources necessary for operations of the application component.  For more information regarding the deployment config, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/dev_guide/deployments.html">Deployment documentation</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Deployer</p></td>
<td><p>The deployer is container responsible for setting up the operational environment of the application container.</p></td>
</tr>
<tr class="row-even"><td><p>Pod</p></td>
<td><p>OpenShift Container Platform leverages the Kubernetes concept of a pod, which is one or more containers deployed together on one host, and the smallest compute unit that can be defined, deployed, and managed.  For more information regarding Pods, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/core_concepts/pods_and_services.html#pods">Pod documentation</a></p></td>
</tr>
<tr class="row-odd"><td><p>App Container</p></td>
<td><p>The application container is the running instance of an application image, as defined by the deployment configuration.</p></td>
</tr>
<tr class="row-even"><td><p>etcd</p></td>
<td><p>EtcD is the key-value database for OCP state and configuration information.</p></td>
</tr>
<tr class="row-odd"><td><p>Secrets</p></td>
<td><p>Secrets provide a mechanism to hold information such as encryption keys, passwords, config files, private source repository credentials, and other data considered sensitive. Secrets decouple sensitive content from the pods that use it and can be mounted into containers using a volume plug-in or used by the system to perform actions on behalf of a pod.  For more information regarding Secrets, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/dev_guide/secrets.html">Secrets documentation</a>.</p></td>
</tr>
<tr class="row-even"><td><p>Persistent Volume</p></td>
<td><p>A Persistent Volume is a storage resource in OCP. Storage is provisioned by the cluster administrators by creating PersistentVolume objects from the storage infrastructure system.  Application Developers utilize Persistent Volumes by creating a Persistent Volume Claim within the scope of the project.  For more information regarding persistent storage, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/additional_concepts/storage.html">Storage documentation</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Log Aggregation</p></td>
<td><p>In OCP, Log Aggregation is implemented as the integrated deployment of Elastic Search, FluentD, and Kibana (EFK).  This stack aggregates logs for a range of OCP services, including project resources deployed on the platform. Application developers can view the logs of the projects for which they have view access. The EFK stack aggregates logs from hosts and applications, whether coming from multiple containers or even deleted pods.  For more information regarding log aggregation in OCP, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/install_config/aggregate_logging.html">Aggregate Logging documentation</a>.</p></td>
</tr>
<tr class="row-even"><td><p>Replication Controller</p></td>
<td><p>A replication controller ensures that a specified number of replicas of a pod are running at all times. If pods exit or are deleted, the replication controller acts to instantiate more up to the defined number. Likewise, if there are more running than desired, it deletes as many as necessary to match the defined amount.  For more information regarding replication controllers, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/core_concepts/deployments.html#replication-controllers">Replication Controller documentation</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Services</p></td>
<td><p>A service serves as an internal load balancer. It identifies a set of replicated pods in order to proxy the connections it receives to them. Backing pods can be added to or removed from a service arbitrarily while the service remains consistently available, enabling anything that depends on the service to refer to it at a consistent internal address.  For more information regarding services, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/core_concepts/pods_and_services.html#services">Services documentation</a>.</p></td>
</tr>
<tr class="row-even"><td><p>Routes</p></td>
<td><p>An OpenShift Container Platform route exposes a service at a host name, like www.example.com, so that external clients can reach it by name.  For more information regarding routes, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/core_concepts/routes.html">Routes documentation</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Router</p></td>
<td><p>Routers enable routes created by developers to be used by external clients. A router uses the service selector to find the service and the endpoints backing the service. When both router and service provide load balancing, OCP uses the router load balancing. A routers detects relevant changes in the IP addresses of its services, and adapts its configuration accordingly.  For more information regarding routers, refer to the <a class="reference external" href="https://docs.openshift.com/container-platform/3.3/architecture/core_concepts/routes.html#routers">Routers documentation</a>.</p></td>
</tr>
<tr class="row-even"><td><p>User</p></td>
<td><p>In this context, a user is the entity attempting to access the application deployed within the platform.  They are assigned no special roles or permissions within the platform, and only have access to the resources exposed via routes by the application developers.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="container-view">
<h3>Container View<a class="headerlink" href="#container-view" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id10">
<h4>Definition<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>A container in the context of an information system is an operating system level virtualization method, provided by kernel constructs, for isolating prcesses using a single kernel.</p>
<p>Due to the value of containers to the information technology field, the definition for both the container image specification and runtime are managed by a community of interested parties: <a class="reference external" href="https://www.opencontainers.org/">Open Container Initiative</a> (OCI).  The technical definition is divided into an Image Specification (image-spec) and Runtime Specification (runtime-spec).</p>
</div>
<div class="section" id="id11">
<h4>Description<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>The container view describes the constructs used in <strong>OCIF</strong> and <strong>runc</strong> process isolation.  This view addresses a single container regardless of being run in the OCP cluster.</p>
</div>
<div class="section" id="id12">
<h4>Actors<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p><strong>Platform Administrators</strong> are responsible for two specific container processes in the OCP cluster.  The first is an integrated container registry.  The second is an application traffic HAProxy router, running in a container.  While these nominally operate without intervention, their continued operation falls under the responsibility of the <strong>Platform Administrators</strong>.</p>
<p><strong>Application Developers</strong> do not necessarily need to be aware of the container construct in OCP.  An <strong>Application Developer</strong> can deploy a containerized application inside OCP simply by providing OCP a source code repository.  At this point OCP automatically builds the source into and deploys a containerized application.</p>
</div>
<div class="section" id="container-filesystem">
<h4>Container Filesystem<a class="headerlink" href="#container-filesystem" title="Permalink to this headline">¶</a></h4>
<p>A single container as it exists on the host’s filesystem is actually a multi-layer filesystem: UnionFS.  Each container image consists of a <em>Kernel</em> library layer, <em>bootfs</em>, and <em>Base Image</em>.  Additional layers may contain application libraries and binaries.  Once this container image is built, it is immutable.  This has implications:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Any patches to a lower layer of the container (e.g. the base image) require the container to be rebuild from that level up.</p></li>
<li><p>Without an externally mounted persistent storage share, any data written to the container’s file system is lost when that container is destroyed.</p></li>
</ol>
</div></blockquote>
<p>The following graphic presents a simplified view of a layered container image.</p>
<p><img alt="Container Image" src="_images/ContainerLayers.png" /></p>
<p>External storage can be provided to the container and mounted as a file system in the container for data persistence.  The platform layer abstracts the <em>Persistent Volume</em> from the container.  The container has no knowledge of the nature of the underlying storage share; only that it has a file system to which it can write.</p>
</div>
<div class="section" id="kernel-components">
<h4>Kernel Components<a class="headerlink" href="#kernel-components" title="Permalink to this headline">¶</a></h4>
<p>A container is constructed using Linux kernel mechanisms, some of which have existed for over 10 years.  The following table describes these kernel mechanisms and their role in isolating processes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 91%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SELinux</p></td>
<td><p>SELinux, a core component of Red Hat Enterprise Linux, labels processes and filesystems, enforcing mandatory access control.  Each containerized process receives a unique SELinux category.</p></td>
</tr>
<tr class="row-odd"><td><p>CGroups</p></td>
<td><p>CGroups provide resource constraints preventing run-away processes.</p></td>
</tr>
<tr class="row-even"><td><p>Kernel Namespaces</p></td>
<td><p>Namespaces allow resources to have identical names in the context of that resource, but unique names from perspective of the host.  For example, the PID namespace allows for PID 0 in each container, but be PID N on the host.</p></td>
</tr>
<tr class="row-odd"><td><p>Kernel Capabilities</p></td>
<td><p>Capabilities are process permission controls that group system calls in different categories.  By default, all capabilities are removed for unprivileged containers.</p></td>
</tr>
<tr class="row-even"><td><p>Secomp</p></td>
<td><p>Secure computing assists with creating sandboxes by defining which system calls should be blocked.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="selinux">
<h4>SELinux<a class="headerlink" href="#selinux" title="Permalink to this headline">¶</a></h4>
<p>The criticality of protecting the platform in a multi-tenant environment cannot be understated.  As a result, the protection offered by SELinux Multi-Category Security (MCS) as an integral component of the layered security model within the <a class="reference external" href="https://access.redhat.com/documentation/en/red-hat-enterprise-linux-atomic-host/7/paged/container-security-guide/chapter-6-docker-selinux-security-policy">Red Hat Enterprise Linux Docker Security Policy</a> is indispensable.  RHEL’s Container MCS policy is derived and extended from <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Virtualization_Security_Guide/chap-Virtualization_Security_Guide-sVirt.html">sVirt</a>, the SELinux policy for isolating virtual machine hypervisor processes.  sVirt policy has been developed, refined, and continuously tested since 2009, and offers a mature and validated model for infrastructure protection.  It is the gold standard of preventing a compromised process from gaining additional privileges or access to components of the system that have not been specifically allowed by policy.</p>
<p><img alt="SELinux MCS Annotation" src="_images/SELinuxMCS.png" /></p>
<p>In a SELinux-labeled file or process, there multiple fields that affect how the policy is evaluated.  Most critical for interpretation of the container MCS policy are the <cite>type</cite> and <cite>category</cite> fields.  In the case of a container process, the <cite>type</cite> will be <cite>svirt_lxc_net_t</cite>.  This indicates that the process will only be allowed to invoke system actions that have been explicitly whitelisted in the policy.  On the other hand, the <cite>category</cite> fields will be uniquely assigned for each process.  This ensures that container processes on the same physical system are not permitted to interact at the system level, and that tenants in the multi-tenant system are unable to access or affect other tenants.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="controls.html" class="btn btn-neutral float-right" title="Security Controls" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="The OpenShift Compliance Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016, Red Hat

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>